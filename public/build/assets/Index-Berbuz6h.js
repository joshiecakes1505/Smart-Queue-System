import{p as _,i as k,c as C,w as h,a as e,b as w,u as W,l as U,k as S,o as a,f as o,h as p,F as y,g,t as l,e as A,n as F,d as f,r as x}from"./app-A4PEbC9S.js";import{_ as N}from"./AuthenticatedLayout-DHRYX0-q.js";import{u as V}from"./usePolling-fYbqRw8i.js";const B={class:"space-y-6"},E={class:"bg-white rounded-lg shadow-sm p-6"},P={class:"flex items-center justify-between gap-4 mb-4"},$={class:"overflow-x-auto"},j={class:"w-full"},D={key:0},L={class:"py-3 px-4 font-medium text-gray-900"},M={class:"py-3 px-4 text-gray-700"},z={class:"py-3 px-4 capitalize"},R={class:"bg-white rounded-lg shadow-sm p-6"},T={key:0,class:"mb-4 border border-green-200 bg-green-50 text-green-800 rounded-lg px-4 py-3 text-sm"},q={class:"overflow-x-auto"},G={class:"w-full"},H={key:0},I={class:"py-3 px-4 font-semibold text-[#800000]"},J={class:"py-3 px-4 text-gray-700"},K={class:"py-3 px-4"},O=["onUpdate:modelValue"],Q=["value"],X={class:"py-3 px-4"},Y=["onClick","disabled"],re={__name:"Index",props:{users:{type:Array,default:()=>[]},cashiers:{type:Array,default:()=>[]},cashierWindows:{type:Array,default:()=>[]}},setup(d){const c=_(d.cashierWindows.reduce((r,t)=>(r[t.id]=t.assigned_user_id??"",r),{})),u=f(null),i=f(""),b=k("$swal"),m=r=>{u.value=r,i.value="";const t=c[r];x.post(route("admin.cashier-windows.assign",r),{cashier_user_id:t===""?null:t},{preserveScroll:!0,onSuccess:()=>{i.value="Cashier assignment updated.",b?.fire({icon:"success",title:"Saved",text:"Cashier assignment updated."}),x.reload({only:["cashierWindows"]})},onError:()=>{b?.fire({icon:"error",title:"Update failed",text:"Unable to update cashier assignment. Please try again."})},onFinish:()=>{u.value=null}})},v=r=>r?.role?.name||"n/a";return V(()=>x.reload({only:["users","cashiers","cashierWindows"],preserveState:!0,preserveScroll:!0}),5e3),(r,t)=>(a(),C(N,{title:"Manage Users"},{default:h(()=>[e("div",B,[e("div",E,[e("div",P,[t[1]||(t[1]=e("h1",{class:"text-2xl font-semibold text-[#800000]"},"Users",-1)),w(W(U),{href:r.route("admin.users.create"),class:"bg-[#FFC107] hover:bg-[#FFB300] text-[#800000] px-4 py-2 rounded-lg font-semibold transition"},{default:h(()=>[...t[0]||(t[0]=[S(" Add User ",-1)])]),_:1},8,["href"])]),e("div",$,[e("table",j,[t[3]||(t[3]=e("thead",null,[e("tr",{class:"border-b border-gray-200"},[e("th",{class:"text-left py-3 px-4 font-semibold text-gray-700"},"Name"),e("th",{class:"text-left py-3 px-4 font-semibold text-gray-700"},"Email"),e("th",{class:"text-left py-3 px-4 font-semibold text-gray-700"},"Role")])],-1)),e("tbody",null,[d.users.length===0?(a(),o("tr",D,[...t[2]||(t[2]=[e("td",{colspan:"3",class:"text-center py-8 text-gray-500"},"No users found",-1)])])):p("",!0),(a(!0),o(y,null,g(d.users,s=>(a(),o("tr",{key:s.id,class:"border-b border-gray-100 hover:bg-gray-50"},[e("td",L,l(s.name),1),e("td",M,l(s.email),1),e("td",z,l(v(s)),1)]))),128))])])])]),e("div",R,[t[7]||(t[7]=e("h2",{class:"text-xl font-semibold text-[#800000] mb-4"},"Assign Cashier Per Window",-1)),i.value?(a(),o("div",T,l(i.value),1)):p("",!0),e("div",q,[e("table",G,[t[6]||(t[6]=e("thead",null,[e("tr",{class:"border-b border-gray-200"},[e("th",{class:"text-left py-3 px-4 font-semibold text-gray-700"},"Window"),e("th",{class:"text-left py-3 px-4 font-semibold text-gray-700"},"Current Cashier"),e("th",{class:"text-left py-3 px-4 font-semibold text-gray-700"},"Assign Cashier"),e("th",{class:"text-left py-3 px-4 font-semibold text-gray-700"},"Action")])],-1)),e("tbody",null,[d.cashierWindows.length===0?(a(),o("tr",H,[...t[4]||(t[4]=[e("td",{colspan:"4",class:"text-center py-8 text-gray-500"},"No cashier windows available",-1)])])):p("",!0),(a(!0),o(y,null,g(d.cashierWindows,s=>(a(),o("tr",{key:s.id,class:"border-b border-gray-100 hover:bg-gray-50"},[e("td",I,l(s.name),1),e("td",J,l(s.assigned_user?.name||"Unassigned"),1),e("td",K,[A(e("select",{"onUpdate:modelValue":n=>c[s.id]=n,class:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#800000]"},[t[5]||(t[5]=e("option",{value:""},"Unassign",-1)),(a(!0),o(y,null,g(d.cashiers,n=>(a(),o("option",{key:n.id,value:n.id},l(n.name)+" ("+l(n.email)+") ",9,Q))),128))],8,O),[[F,c[s.id]]])]),e("td",X,[e("button",{onClick:n=>m(s.id),disabled:u.value===s.id,class:"border-2 border-[#800000] hover:bg-[#800000] hover:text-white text-[#800000] px-4 py-2 rounded-lg font-semibold transition disabled:opacity-50"}," Save ",8,Y)])]))),128))])])])])])]),_:1}))}};export{re as default};
