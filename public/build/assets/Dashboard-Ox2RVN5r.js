import{j as _,c as w,w as h,a as e,t as l,o as i,f as n,k as g,h as u,m as S,e as d,u as r,v as k,F as y,g as x,n as C,A as p,y as N,B as Q,r as T}from"./app-A4PEbC9S.js";import{_ as V}from"./AuthenticatedLayout-DHRYX0-q.js";import{u as F}from"./usePolling-fYbqRw8i.js";const U={class:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4"},W={class:"text-sm"},B={class:"text-sm"},D={class:"space-y-6"},P={key:0,class:"bg-green-50 border border-green-200 rounded-lg p-4"},A={class:"text-green-800 font-semibold text-center"},M={class:"text-2xl"},q={class:"bg-white rounded-lg shadow-sm p-6"},j={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},z={key:0,class:"text-red-500 text-sm mt-1"},E=["value"],G={key:0,class:"text-red-500 text-sm mt-1"},L={class:"flex gap-6"},R={class:"flex items-center cursor-pointer"},H={class:"flex items-center cursor-pointer"},O={class:"flex items-center cursor-pointer"},$={class:"flex items-center cursor-pointer"},I={class:"flex items-center cursor-pointer"},J={key:0,class:"text-red-500 text-sm mt-1"},K={class:"flex justify-end"},X=["disabled"],Y={key:0},Z={key:1},ee={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},te={class:"bg-white rounded-lg shadow-sm p-6"},se={class:"text-3xl font-bold text-[#800000]"},oe={class:"bg-white rounded-lg shadow-sm p-6"},re={class:"text-3xl font-bold text-green-600"},le={class:"bg-white rounded-lg shadow-sm p-6"},ie={class:"overflow-x-auto"},ne={class:"w-full"},ae={key:0},de={class:"py-3 px-4 font-semibold text-[#800000]"},ue={class:"py-3 px-4"},pe={class:"py-3 px-4 text-gray-600"},ye={__name:"Dashboard",props:{serviceCategories:{type:Array,default:()=>[]},waitingQueues:{type:Array,default:()=>[]},totalWaiting:{type:Number,default:0},totalServedToday:{type:Number,default:0}},setup(a){const b=Q(),c=N(()=>b.props.flash?.queueNumber||null),s=_({client_name:"",service_category_id:"",client_type:"student"}),f=()=>{s.post(route("frontdesk.queues.store"),{preserveScroll:!0,onSuccess:()=>{s.reset()}})},v=m=>new Date(m).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});return F(()=>T.reload({only:["waitingQueues","totalWaiting","totalServedToday"],preserveState:!0,preserveScroll:!0}),2500),(m,t)=>(i(),w(V,{title:"Front Desk Dashboard"},{default:h(()=>[e("div",U,[e("p",W,"Categories: "+l(a.serviceCategories?.length||0),1),e("p",B,"Waiting Queues: "+l(a.waitingQueues?.length||0),1)]),e("div",D,[c.value?(i(),n("div",P,[e("p",A,[t[7]||(t[7]=g(" Queue Created Successfully! Queue Number: ",-1)),e("span",M,l(c.value),1)])])):u("",!0),e("div",q,[t[17]||(t[17]=e("h2",{class:"text-xl font-semibold text-[#800000] mb-4"},"Queue Registration",-1)),e("form",{onSubmit:S(f,["prevent"]),class:"space-y-4"},[e("div",j,[e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[g(" Client Name "),e("span",{class:"text-gray-400"},"(Optional)")],-1)),d(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>r(s).client_name=o),type:"text",class:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#800000]",placeholder:"Enter client name"},null,512),[[k,r(s).client_name]]),r(s).errors.client_name?(i(),n("div",z,l(r(s).errors.client_name),1)):u("",!0)]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[g(" Service Category "),e("span",{class:"text-red-500"},"*")],-1)),d(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>r(s).service_category_id=o),class:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#800000]",required:""},[t[9]||(t[9]=e("option",{value:"",disabled:""},"Select service",-1)),(i(!0),n(y,null,x(a.serviceCategories,o=>(i(),n("option",{key:o.id,value:o.id},l(o.name),9,E))),128))],512),[[C,r(s).service_category_id]]),r(s).errors.service_category_id?(i(),n("div",G,l(r(s).errors.service_category_id),1)):u("",!0)])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[g(" Client Type "),e("span",{class:"text-red-500"},"*")],-1)),e("div",L,[e("label",R,[d(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>r(s).client_type=o),type:"radio",value:"student",class:"w-4 h-4 text-[#800000] border-gray-300 focus:ring-[#800000]"},null,512),[[p,r(s).client_type]]),t[11]||(t[11]=e("span",{class:"ml-2 text-gray-700"},"Student",-1))]),e("label",H,[d(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>r(s).client_type=o),type:"radio",value:"parent",class:"w-4 h-4 text-[#800000] border-gray-300 focus:ring-[#800000]"},null,512),[[p,r(s).client_type]]),t[12]||(t[12]=e("span",{class:"ml-2 text-gray-700"},"Parent",-1))]),e("label",O,[d(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>r(s).client_type=o),type:"radio",value:"visitor",class:"w-4 h-4 text-[#800000] border-gray-300 focus:ring-[#800000]"},null,512),[[p,r(s).client_type]]),t[13]||(t[13]=e("span",{class:"ml-2 text-gray-700"},"Visitor",-1))]),e("label",$,[d(e("input",{"onUpdate:modelValue":t[5]||(t[5]=o=>r(s).client_type=o),type:"radio",value:"senior_citizen",class:"w-4 h-4 text-[#800000] border-gray-300 focus:ring-[#800000]"},null,512),[[p,r(s).client_type]]),t[14]||(t[14]=e("span",{class:"ml-2 text-gray-700"},"Senior Citizen (Priority)",-1))]),e("label",I,[d(e("input",{"onUpdate:modelValue":t[6]||(t[6]=o=>r(s).client_type=o),type:"radio",value:"high_priority",class:"w-4 h-4 text-[#800000] border-gray-300 focus:ring-[#800000]"},null,512),[[p,r(s).client_type]]),t[15]||(t[15]=e("span",{class:"ml-2 text-gray-700"},"High Priority",-1))])]),r(s).errors.client_type?(i(),n("div",J,l(r(s).errors.client_type),1)):u("",!0)]),e("div",K,[e("button",{type:"submit",class:"bg-[#FFC107] hover:bg-[#FFB300] text-[#800000] px-6 py-3 rounded-lg font-semibold transition disabled:opacity-50",disabled:r(s).processing},[r(s).processing?(i(),n("span",Y,"Generating...")):(i(),n("span",Z,"Generate Queue Number"))],8,X)])],32)]),e("div",ee,[e("div",te,[t[18]||(t[18]=e("p",{class:"text-gray-600 text-sm"},"Total Waiting",-1)),e("p",se,l(a.totalWaiting),1)]),e("div",oe,[t[19]||(t[19]=e("p",{class:"text-gray-600 text-sm"},"Total Served Today",-1)),e("p",re,l(a.totalServedToday),1)])]),e("div",le,[t[23]||(t[23]=e("h2",{class:"text-xl font-semibold text-[#800000] mb-4"},"Current Waiting Queue",-1)),e("div",ie,[e("table",ne,[t[22]||(t[22]=e("thead",null,[e("tr",{class:"border-b border-gray-200"},[e("th",{class:"text-left py-3 px-4 font-semibold text-gray-700"},"Queue Number"),e("th",{class:"text-left py-3 px-4 font-semibold text-gray-700"},"Category"),e("th",{class:"text-left py-3 px-4 font-semibold text-gray-700"},"Status"),e("th",{class:"text-left py-3 px-4 font-semibold text-gray-700"},"Time Created")])],-1)),e("tbody",null,[a.waitingQueues.length===0?(i(),n("tr",ae,[...t[20]||(t[20]=[e("td",{colspan:"4",class:"text-center py-8 text-gray-500"}," No waiting queues ",-1)])])):u("",!0),(i(!0),n(y,null,x(a.waitingQueues,o=>(i(),n("tr",{key:o.id,class:"border-b border-gray-100 hover:bg-gray-50"},[e("td",de,l(o.queue_number),1),e("td",ue,l(o.service_category?.name||"N/A"),1),t[21]||(t[21]=e("td",{class:"py-3 px-4"},[e("span",{class:"bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm"}," Waiting ")],-1)),e("td",pe,l(v(o.created_at)),1)]))),128))])])])])])]),_:1}))}};export{ye as default};
